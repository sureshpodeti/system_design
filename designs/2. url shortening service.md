# URL Shortening service

#### Requirements
Generate 7 characters unique string

### 1. Base 64 encoding
Consider [a-zA-Z0-9] = 26 + 26 + 10 = 62 characters 

For 7 characters, 62^7 short urls are possible ~ 3.52x10^12 (3.52 trillion url shortenings)

Assuming 1000 new url shortenings / second. It would take 111 years to consume all the shortened urls.  

#### A. Generate random 7 character base62 string

	package main

	import (
		"fmt"
		"math/rand"
		"time"
	)

	func main() {

		base62EncodeCharacters := "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"

		var result string
		for i := 0; i < 7; i++ {
			source := rand.NewSource(time.Now().UnixNano())
			r := rand.New(source)
			rn := r.Intn(62)
			result += string(base62EncodeCharacters[rn])
		}
		fmt.Println(" Base62 encoded string - ", result)
	}


Problem:
It's independent of the given url, as it involves generating 7 random numbers
Possibility of duplicates

#### B. Hashing and then Encoding

h(actual url) -> hashed string<br>
base62encode(hashed string) -> 7 characters

If we use MD5 for hashing, it produces hash of 128 bits which is generally represented in hexadecimal. Each hexadecimal character stored using 4 bits (i.e 2^4 = 16).<br>
So, 128 / 4 = 32. MD5 hash produces the string of length 32 characters.

But we need only 7 characters out of those 32 characters. How to produce 7 characters out of 32?

Possible solution : Take 7 first or last 7 characters from MD5 produced 32 character hash

Problem:
Possibility of duplication

#### C. Counter
Generate a integer counter between [1,3.52x10^9], then encode it with base62. This will produce 7 characters

Problem: 
It is a sequential counter and easy to guess the next value. Add some random bits to the 7 characters to modify it.
